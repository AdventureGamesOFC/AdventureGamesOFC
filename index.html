<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loot Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
        }
        button {
            padding: 10px;
            margin: 5px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        #lootResult, #monsterLootResult, #chestLootResult {
            margin-top: 20px;
        }
        .lootItem {
            margin: 5px;
            padding: 5px;
            background-color: #f1f1f1;
            border-radius: 5px;
        }
        .cursedItem {
            color: red;
        }
    </style>
</head>
<body>

<h1>Loot Generator</h1>

<!-- Chest Loot Section -->
<h2>Chest Loot</h2>
<button onclick="generateChestLoot('Clock Town Chest')">Clock Town Chest</button>
<button onclick="generateChestLoot('Termina Field Chest')">Termina Field Chest</button>
<button onclick="generateChestLoot('Dungeon Chest')">Dungeon Chest</button>
<br><br>
<div id="chestLootResult"></div>

<hr>

<!-- Monster Loot Section -->
<h2>Monster Loot</h2>
<button onclick="generateMonsterLoot('Normal Bokoblin')">Normal Bokoblin</button>
<button onclick="generateMonsterLoot('Silver Bokoblin')">Silver Bokoblin</button>
<button onclick="generateMonsterLoot('Golden Bokoblin')">Golden Bokoblin</button>
<button onclick="generateMonsterLoot('Boss Silver Bokoblin')">Boss Silver Bokoblin</button>
<button onclick="generateMonsterLoot('Chuchu')">Chuchu</button>
<button onclick="generateMonsterLoot('Boss Chuchu')">Boss Chuchu</button>
<button onclick="generateMonsterLoot('Monke')">Monke</button>
<button onclick="generateMonsterLoot('Le Oat Brothers')">Le Oat Brothers</button>
<br><br>
<input type="checkbox" id="cursedMedal" onclick="toggleCursedMode()"> Cursed Medal Mode
<br><br>
<div id="monsterLootResult"></div>

<script>
// Chest loot tables for different areas
const chestLootTables = {
    "Clock Town Chest": [
        { item: "1 Scrap", chance: 0.3 },
        { item: "3 Gold", chance: 0.3 },
        { item: "4 Gold", chance: 0.25 },
        { item: "Deku Mask", chance: 0.075 },
        { item: "Couple's Mask", chance: 0.075 }
    ],
    "Termina Field Chest": [
        { item: "Bunny Hood", chance: 0.05 },
        { item: "5 Gold", chance: 0.05 },
        { item: "10 Rupees", chance: 0.2 },
        { item: "2 Scraps", chance: 0.25 },
        { item: "3 Gold", chance: 0.25 },
        { item: "5 Rupees", chance: 0.25 }
    ],
    "Dungeon Chest": [
        "Master Sword", "Golden Key", "Rare Gem", "Flame Shield", "Health Potion", "Cursed Skull"
    ]
};

// Monster loot tables with guaranteed and optional cursed loot
const monsterLootTables = {
    "Normal Bokoblin": {
        guaranteed: ["1 Gold", "1 Scrap"],
        cursedLoot: {
            guaranteed: ["2 Gold", "1 Scrap"]
        }
    },
    "Silver Bokoblin": {
        guaranteed: ["3 Gold", "3 Scraps", "1 Bokoblin Horn"],
        cursedLoot: {
            guaranteed: ["6 Gold", "3 Scraps", "2 Bokoblin Horn"]
        }
    },
    "Golden Bokoblin": {
        guaranteed: ["15 Gold", "6 Scraps", "1-2 Rare Scraps", "2-3 Bokoblin Horns"],
        cursedLoot: {
            guaranteed: ["30 Gold", "6 Scraps", "5 Bokoblin Horns"],
        }
    },
    "Boss Silver Bokoblin": {
        guaranteed: ["1 Skill Point", "5 Gold", "4 Bokoblin Horns", "5 Scraps", "2-3 Rare Scraps", "1 Large Bokoblin Horn"],
        cursedLoot: {
            guaranteed: ["10 Gold", "8 Bokoblin Horns", "2 Large Bokoblin Horns"],
        }
    },
    "Chuchu": {
        guaranteed: ["1 Rupee"],
        nonGuaranteed: [
            { item: "1 Chuchu Jelly", chance: 1 }
        ],
        cursedLoot: {
            guaranteed: ["2 Rupees", "2 Chuchu Jelly"],
        }
    },
    "Boss Chuchu": {
        guaranteed: ["8 Rupees", "3 Scraps", "1 Rare Scrap", "3 Chuchu Jelly"],
        cursedLoot: {
            guaranteed: ["16 Rupees", "6 Chuchu Jelly"]
        }
    },
    "Monke": {
        guaranteed: ["2 Skill Points", "5 Gold", "10 Scraps"],
        cursedLoot: {
            guaranteed: ["2 Skill Points", "10 Gold", "10 Scraps"]
        }
    },
    "Le Oat Brothers": {
        guaranteed: ["5 Gold"],
        cursedLoot: {
            guaranteed: ["10 Gold"],
            nonGuaranteed: [
                { item: "Unlimited Bacon", chance: 0.1 }
            ]
        }
    }
};

// Function to parse range items and pick a random number within the range
function getRandomQuantity(item) {
    const rangeMatch = item.match(/(\d+)-(\d+)/);
    if (rangeMatch) {
        const min = parseInt(rangeMatch[1]);
        const max = parseInt(rangeMatch[2]);
        const randomQuantity = Math.floor(Math.random() * (max - min + 1)) + min;
        return item.replace(rangeMatch[0], randomQuantity);
    }
    return item;
}

// Generate monster loot with optional Cursed Medal Mode
function generateMonsterLoot(monsterName) {
    const lootTable = monsterLootTables[monsterName];
    const monsterLootResult = document.getElementById('monsterLootResult');
    monsterLootResult.innerHTML = '';

    if (!lootTable) {
        monsterLootResult.innerHTML = 'Loot table not found!';
        return;
    }

    const isCursed = document.getElementById('cursedMedal').checked;
    const selectedLoot = isCursed && lootTable.cursedLoot ? lootTable.cursedLoot : lootTable;

    // Display guaranteed loot
    selectedLoot.guaranteed.forEach(item => {
        const div = document.createElement('div');
        div.className = 'lootItem';
        div.textContent = getRandomQuantity(item);
        monsterLootResult.appendChild(div);
    });

    // Display non-guaranteed loot with chances
    (selectedLoot.nonGuaranteed || []).forEach(drop => {
        if (Math.random() < drop.chance) {
            const div = document.createElement('div');
            div.className = 'lootItem';
            div.textContent = getRandomQuantity(drop.item);
            monsterLootResult.appendChild(div);
        }
    });
}

// Function to generate chest loot
function generateChestLoot(chestName) {
    const lootTable = chestLootTables[chestName];
    const chestLootResult = document.getElementById('chestLootResult');
    chestLootResult.innerHTML = '';

    if (!lootTable) {
        chestLootResult.innerHTML = 'Loot table not found!';
        return;
    }

    const random = Math.random();
    let cumulativeChance = 0;
    let selectedItem = "Nothing";

    for (const loot of lootTable) {
        cumulativeChance += loot.chance || 0;
        if (random < cumulativeChance) {
            selectedItem = loot.item;
            break;
        }
    }

    chestLootResult.innerHTML = `<div class="lootItem">${selectedItem}</div>`;
}

// Toggle the Cursed Medal Mode and regenerate loot
function toggleCursedMode() {
    const monsterButtons = document.querySelectorAll('button[onclick^="generateMonsterLoot"]');
    monsterButtons.forEach(button => {
        if (button.dataset.selected) {
            generateMonsterLoot(button.innerText);
        }
    });
}
</script>

</body>
</html>
